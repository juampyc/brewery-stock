/* ====== Base / Variables ====== */
* { box-sizing: border-box; }
html, body { height: 100%; }

:root{
  --bg:#0f1216; --fg:#e7e9ee; --muted:#9aa3b2;
  --card:#171b21; --border:#2a313b;
  --primary:#3b82f6;
  --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444;
  --shadow:0 6px 24px rgba(0,0,0,.24), 0 2px 8px rgba(0,0,0,.18);
}

body{
  margin:0; background:var(--bg); color:var(--fg);
  font:15px/1.4 system-ui, Segoe UI, Roboto, Helvetica, Arial;
}

.container{ max-width:980px; margin:0 auto; padding:16px; }

/* ====== Header global ====== */
.site-header {
  position: sticky; top: 0; z-index: 50;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  backdrop-filter: saturate(120%) blur(4px);
}
.site-header__inner{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:10px 0;
}
.site-header__brand{
  margin:0; font-size:1.1rem; font-weight:700;
}
.site-header__nav{ display:flex; gap:8px; flex-wrap:wrap; }
.btn-icon{ display:inline-flex; align-items:center; gap:6px; line-height:1; }
.btn-icon .icon{ font-size:1.1em; }
@media (max-width:560px){ .hide-sm{ display:none; } }

/* ====== Topbar (legacy) ====== */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:var(--bg); z-index:10;
}
h1{ margin:0; font-size:18px; letter-spacing:.2px; }

/* ====== Cards / Layout ====== */
.cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:16px; }
.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:14px; padding:16px; box-shadow:var(--shadow);
}
.card h2{ margin:0 0 4px; font-size:16px; }
.big{ font-size:42px; font-weight:700; margin:8px 0; }
.muted{ color:var(--muted); }
.small{ font-size:12px; line-height:1.3; }

/* ====== Botones ====== */
.actions{ display:flex; gap:8px; }
.btn{
  appearance:none; border:1px solid var(--border);
  background:#11161d; color:var(--fg);
  padding:8px 12px; border-radius:10px; cursor:pointer;
  transition:transform .06s ease, opacity .2s ease;
}
.btn:hover{ transform:translateY(-1px); }
.btn:disabled{ opacity:.5; cursor:not-allowed; }
.btn.primary{ background:var(--primary); border-color:transparent; color:#fff; }
.btn.ghost{ background:transparent; }
.icon-btn{
  background:transparent; border:0; color:var(--fg);
  font-size:18px; cursor:pointer; padding:6px; border-radius:8px;
}
.icon-btn:hover{ background:#222933; }

/* ====== Formularios / Campos ====== */
.field{ display:flex; flex-direction:column; gap:6px; }
input, select{
  width:100%; padding:10px 12px; border-radius:10px;
  border:1px solid var(--border);
  background:#0b0f14; color:var(--fg); outline:none;
}
select:focus, input:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(59,130,246,0.25);
}

/* Grid utilitario */
.grid{ display:grid; grid-template-columns:1fr; gap:12px; }
.grid.grid-3{ grid-template-columns:1fr 1fr 1fr; }
.align-start{ align-items:start; }
.span-2{ grid-column:span 2; }
.col-left{ display:flex; flex-direction:column; gap:12px; }
.field.inline-check{ display:flex; align-items:center; gap:10px; flex-direction:row; }

@media (max-width:720px){
  .grid.grid-3{ grid-template-columns:1fr; }
  .span-2{ grid-column:span 1; }
  .small{ font-size:11px; }
}

/* ====== Modal ====== */
.modal{
  position:fixed; inset:0; display:none;
  align-items:center; justify-content:center; padding:16px; z-index:50;
}
.modal[aria-hidden="false"]{ display:flex; }
.modal__content{
  width:min(640px,100%); background:var(--card);
  border:1px solid var(--border); border-radius:16px;
  box-shadow:var(--shadow); overflow:hidden;
}
.modal__header, .modal__footer{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 14px; border-bottom:1px solid var(--border);
}
.modal__footer{ border-bottom:0; border-top:1px solid var(--border); }
.form{ padding:14px; }
.backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.4);
  opacity:0; visibility:hidden; transition:opacity .2s ease; z-index:40;
}
.backdrop[aria-hidden="false"]{ opacity:1; visibility:visible; }

/* ====== Tablas ====== */
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{
  padding:8px 10px; text-align:left;
  border-bottom:1px solid var(--border);
  white-space:nowrap;
}
.table th{
  background:#1a1f24; color:#fff; font-weight:600;
}
/* Modal etiquetas: ancho cómodo y campos en 2 columnas */
.modal__content.labels-compact { max-width: 560px; }
.form.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:720px){ .form.grid-2 { grid-template-columns:1fr; } }

/* Select con mismo look que input, sin que se estire feo */
select#styleCombo { width:100%; }

/* Texto auxiliar más sutil bajo el select */
.help { color: var(--muted); font-size: 12px; margin-top: 6px; }

/* ===== Badges de estado producción ===== */
.badge {
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 10px; border-radius:999px; font-size:12px;
  border:1px solid var(--border); background:#0d1218; color:var(--fg);
  line-height:1;
}
.badge .dot { width:8px; height:8px; border-radius:50%; display:inline-block; }

.badge.ENLATADO    { border-color:#3b82f6; background:rgba(59,130,246,.12); color:#93c5fd; }
.badge.ENLATADO .dot { background:#3b82f6; }

.badge.PAUSTERIZADO    { border-color:#a78bfa; background:rgba(167,139,250,.12); color:#c4b5fd; }
.badge.PAUSTERIZADO .dot { background:#a78bfa; }

.badge.ETIQUETADO    { border-color:#22c55e; background:rgba(34,197,94,.12); color:#86efac; }
.badge.ETIQUETADO .dot { background:#22c55e; }

.badge.FINAL    { border-color:#f59e0b; background:rgba(245,158,11,.12); color:#fde68a; }
.badge.FINAL .dot { background:#f59e0b; }

tr.is-busy { opacity: .6; pointer-events: none; }
.badge { display:inline-flex; gap:6px; align-items:center; padding:4px 8px; border:1px solid var(--border); border-radius:999px; font-size:12px }
.badge .dot { width:8px; height:8px; border-radius:50%; background: var(--muted); display:inline-block }
.badge.ENLATADO .dot { background:#64748b }
.badge.PAUSTERIZADO .dot { background:#f59e0b }
.badge.ETIQUETADO .dot { background:#3b82f6 }
.badge.FINAL .dot { background:#22c55e }

/* Pie peque en un card compacto */
.card-small { max-width: 360px; }
.card-small canvas { max-height: 220px; }

.charts-grid{display:grid;grid-template-columns:1fr;gap:16px}
@media (max-width: 900px){ .kpi-grid{grid-template-columns:1fr} }
.pie-card{width:320px;min-width:280px}
.pie-wrap{display:flex;align-items:center;justify-content:center;height:220px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:var(--shadow)}
.muted{color:var(--muted)}
.big{font-size:32px;font-weight:700;margin:6px 0}
.container{max-width:1100px;margin:0 auto;padding:16px}
.chart-wrap{overflow:auto;padding-bottom:8px}
.chart-wrap canvas{min-width:720px}


/* index_overrides.css — v8 */
/* 4 cards full width aligned with chart; remove any max-widths inside grid */

.top-row {
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:16px;
  align-items:stretch;
  width:100%;
  margin:0 0 16px 0;
  justify-items:stretch;
}
.top-row > .card{
  margin:0 !important;
  width:100% !important;
  max-width:none !important;
  height:100%;
}

/* Compact KPI cards */
.card.compact { padding: 10px !important; }
.card.compact .big-number { font-size: 28px !important; line-height: 1.1; }
.card.compact h3, .card.compact h4 { font-size: 14px !important; }

/* Estados de producción (vertical) */
.kpi-states-vert { display:grid; gap:10px; margin-top:10px; }
.kpi-row { display:flex; align-items:center; justify-content:space-between; gap:12px;
  border:1px solid var(--border); background:var(--card); border-radius:12px; padding:8px 12px; }
.kpi-row .left { display:flex; align-items:center; gap:10px; }
.kpi-row .dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.kpi-row .label { font-weight:600; }
.kpi-row .num { font-weight:800; font-variant-numeric: tabular-nums; }

/* Week sales card specifics */
.kpi-week { display:grid; gap:10px; margin-top:8px; }
.kpi-week .row { display:flex; align-items:center; justify-content:space-between; gap:10px; border:1px solid var(--border); background:var(--card); border-radius:12px; padding:8px 10px; }
.kpi-week .row .left { display:flex; flex-direction:column; line-height:1.2; }
.kpi-week .row .left small { color:var(--muted); }
.kpi-week .val { font-weight:800; font-variant-numeric:tabular-nums; }
.wk-range { color: var(--muted); font-size: 12px; margin-top: 2px; }

/* ===== Pills de estado (Producción) ===== */
.status-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: .2px;
  line-height: 1;
  user-select: none;
  white-space: nowrap;
}
.status-dot { width: 8px; height: 8px; border-radius: 50%; }

.status-enlatado      { color: #1f77b4; background: rgba(31,119,180,.12); }
.status-pausterizado  { color: #ff7f0e; background: rgba(255,127,14,.12); }
.status-etiquetado    { color: #2ca02c; background: rgba(44,160,44,.12); }
.status-final         { color: #d62728; background: rgba(214,39,40,.12); }

.status-enlatado .status-dot     { background: #1f77b4; }
.status-pausterizado .status-dot { background: #ff7f0e; }
.status-etiquetado .status-dot   { background: #2ca02c; }
.status-final .status-dot        { background: #d62728; }
.table td .status-pill { max-width: 100%; overflow: hidden; text-overflow: ellipsis; }

/* Badges de estado */
.badge { display:inline-flex; align-items:center; gap:8px; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:600; background:var(--card); border:1px solid var(--border); }
.badge .dot { width:8px; height:8px; border-radius:50%; background:#999; display:inline-block; }
.badge.ENLATADO    { color:#1f77b4; border-color:#1f77b4; background:rgba(31,119,180,.08); }
.badge.ENLATADO .dot { background:#1f77b4; }
.badge.PAUSTERIZADO{ color:#ff7f0e; border-color:#ff7f0e; background:rgba(255,127,14,.08); }
.badge.PAUSTERIZADO .dot { background:#ff7f0e; }
.badge.ETIQUETADO  { color:#2ca02c; border-color:#2ca02c; background:rgba(44,160,44,.08); }
.badge.ETIQUETADO .dot { background:#2ca02c; }
.badge.FINAL       { color:#6b21a8; border-color:#6b21a8; background:rgba(107,33,168,.08); }
.badge.FINAL .dot { background:#6b21a8; }

.badge { display:inline-block; min-width:1.25rem; text-align:center; }
.badge.pending { color:#999; }
.badge.ok { color:#0a0; font-weight:700; }
.center { text-align:center; }
.muted { color:#666; }


/* Fuerza “Vendidas” y “Entregadas” en columna (una arriba de la otra) */
.week-kpis{
  display: grid;
  grid-template-columns: 1fr !important; /* siempre 1 columna */
  gap: 14px;                              /* espacio entre tarjetas */
}

.kpi-tile{
  width: 100%;
}


/* ==== Ventas (semana) – dark-friendly & layout fix ==== */
.card.week-card { padding: 16px 18px; border-radius: 16px; }

.week-head {
  display: flex; gap: 12px; align-items: center;
}
.week-title { margin: 0; font-size: 18px; font-weight: 600; }

/* pill del rango */
.week-range {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 2px 10px; font-size: 13px; line-height: 20px;
  border-radius: 999px; white-space: nowrap;
  background: rgba(255,255,255,.08); color: #e5e7eb; 
  border: 1px solid rgba(255,255,255,.14);
}

.week-actions { margin-left: auto; display: flex; gap: 8px; }
.btn.ghost.sm {
  padding: 6px 10px; font-size: 12px; line-height: 1; border-radius: 8px;
  background: transparent;
  border: 1px solid rgba(255,255,255,.18);
  color: #e5e7eb;
}
.btn.ghost.sm:hover { background: rgba(255,255,255,.06); }

/* grid de KPIs: 2 columnas y mínimo ancho para que el número no pise el título */
.week-kpis {
  display: grid; gap: 14px; margin-top: 12px;
  grid-template-columns: repeat(2, minmax(220px, 1fr));
}

.kpi-tile {
  border-radius: 12px; padding: 12px 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  display: grid;
  grid-template-columns: 1fr auto;   /* izq: título — der: número */
  grid-template-rows: auto auto;     /* fila1: título+valor, fila2: (vacío)+sub */
  align-items: baseline; gap: 6px;
}

/* colores */
.kpi-title { font-size: 12px; color: rgba(255,255,255,.70); display: flex; gap: 6px; align-items: center; }
.kpi-value { font-size: 28px; font-weight: 700; letter-spacing: .2px; color: #fff; text-align: right; white-space: nowrap; }
.kpi-sub   { font-size: 12px; color: rgba(255,255,255,.58); text-align: right; }

/* posiciones en la grilla */
.kpi-title { grid-column: 1 / 2; grid-row: 1; }
.kpi-value { grid-column: 2 / 3; grid-row: 1; justify-self: end; }
.kpi-sub   { grid-column: 2 / 3; grid-row: 2; justify-self: end; }

.kpi-dot { width: 8px; height: 8px; border-radius: 999px; display: inline-block; }
.kpi-dot.sold  { background:#2563eb; }  /* azul vendidas */
.kpi-dot.deliv { background:#16a34a; }  /* verde entregadas */

/* responsive: 1 columna en mobile */
@media (max-width: 720px){
  .week-kpis { grid-template-columns: 1fr; }
}
